// save us one ajax call that we will always have to make
// this can also be grabbed by navigating to /epub_content/metadata.json
window.ReadiumLibraryData = [
	{
		"fixed_layout":false,
		"open_to_spread":false,
		"cover_href":"/images/library/missing-cover-image.png",
		"created_at":"2012-03-27T19:22:01.521Z",
		"updated_at":"2012-03-27T19:23:38.309Z",
		"key":"1",
		"src_url":"http://code.google.com/p/epub-samples/downloads/list",
		"package_doc_path":"/epub_content/1/EPUB/package.opf",
		"id":"code.google.com.epub-samples.linear-algebra",
		"epub_version":"3.0",
		"title":"A First Course in Linear Algebra",
		"author":"Robert A. Beezer",
		"publisher":"",
		"description":"",
		"rights":"This work is shared with the public using the GNU Free Documentation License, Version 1.2.",
		"language":"en",
		"pubdate":"",
		"modified_date":"2012-03-05T12:47:00Z",
		"layout":"",
		"spread":"",
		"orientation":"",
		"ncx":""
	},
	{
		"fixed_layout":false,
		"open_to_spread":false,
		"cover_href":"/epub_content/2/EPUB/images/portrait.jpg",
		"created_at":"2012-03-27T19:24:45.543Z",
		"updated_at":"2012-03-27T19:25:00.094Z",
		"key":"2",
		"src_url":"http://code.google.com/p/epub-samples/downloads/list",
		"package_doc_path":"/epub_content/2/EPUB/cole.opf",
		"id":"code.google.com.epub-samples.cole-voyage-of-life",
		"epub_version":"3.0",
		"title":"Thomas Cole - The Voyage of Life",
		"author":"Jesse Dylan",
		"publisher":"",
		"description":"",
		"rights":"This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License.",
		"language":"en-US",
		"pubdate":"",
		"modified_date":"2012-03-20T11:37:00Z",
		"layout":"",
		"spread":"",
		"orientation":"",
		"ncx":""
	},{
		"fixed_layout":false,
		"open_to_spread":false,
		"cover_href":"/epub_content/3/EPUB/wasteland-cover.jpg",
		"created_at":"2012-03-27T19:25:40.235Z",
		"updated_at":"2012-03-27T19:26:06.326Z",
		"key":"3",
		"src_url":"http://code.google.com/p/epub-samples/downloads/list",
		"package_doc_path":"/epub_content/3/EPUB/wasteland.opf",
		"id":"code.google.com.epub-samples.wasteland-basic","epub_version":"3.0",
		"title":"The Waste Land","author":"T.S. Eliot",
		"publisher":"",
		"description":"",
		"rights":"This work is shared with the public using the Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0) license.",
		"language":"en-US",
		"pubdate":"2011-09-01",
		"modified_date":"2012-01-18T12:47:00Z",
		"layout":"",
		"spread":"",
		"orientation":"",
		"ncx":"ncx"
	},{
		"fixed_layout":true,
		"open_to_spread":false,
		"cover_href":"/epub_content/4/EPUB/Image/cover.jpg",
		"created_at":"2012-03-28T18:24:18.450Z",
		"updated_at":"2012-03-28T18:25:32.553Z",
		"key":"4",
		"src_url":"http://code.google.com/p/epub-samples/downloads/list",
		"package_doc_path":"/epub_content/4/EPUB/package.opf",
		"id":"urn:uuid:d5803940-647f-11e1-ad77-0002a5d5c51b",
		"epub_version":"3.0",
		"title":"Page Blanche","author":"Boulet",
		"publisher":"éditions Delcourt",
		"description":"",
		"rights":"This work is shared with the public using the Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0) license.",
		"language":"fr",
		"pubdate":"2012-01-18",
		"modified_date":"2012-03-06T12:00:00Z",
		"layout":"pre-paginated",
		"spread":"auto",
		"orientation":"auto",
		"ncx":""
	}, {
		"author": "Mary Webb",
		"cover_href": "/images/library/missing-cover-image.png",
		"created_at": "2012-04-10T21:47:53.353Z",
		"description": "",
		"epub_version": "2.0",
		"fixed_layout": false,
		"id": "urn:uuid:ADDB2B4D-BA43-4DE9-8BAB-CF8759C8F843",
		"key": "3921047c34132ab12338059f09bbf5c8",
		"language": "en-gb",
		"layout": "",
		"modified_date": "",
		"ncx": "ncx",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/5/OPS/content.opf",
		"pubdate": "2002",
		"publisher": "epubBooks (www.epubbooks.com)",
		"rights": "↵            Provided for free by epubBooks.com. Not for commercial use.↵            This EPUB eBook is released under a Creative Commons (BY-NC-ND/3.0) Licence.↵            Source text and images are in the Public Domain.↵      ",
		"spread": "",
		"src_url": "webb-precious-bane.epub",
		"title": "Precious Bane",
		"updated_at": "2012-04-10T21:48:57.267Z"
	}, {
		"apple_fixed": false,
		"author": "EPUB 3 Working Group",
		"cover_href": "/epub_content/epub30_spec/EPUB/img/epub_logo_color.jpg",
		"created_at": "2012-06-15T00:05:56.371Z",
		"description": "",
		"epub_version": "3.0",
		"fixed_layout": false,
		"id": "code.google.com.epub-samples.epub30-spec",
		"key": "epub30_spec",
		"language": "en",
		"layout": "",
		"modified_date": "2012-02-27T16:38:35Z",
		"ncx": "",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/epub30_spec/EPUB/package.opf",
		"page_prog_dir": "",
		"paginate_backwards": false,
		"pubdate": "",
		"publisher": "",
		"rights": "",
		"spread": "",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "EPUB 3.0 Specification",
		"updated_at": "2012-06-15T00:06:37.334Z"
	}, {
		"apple_fixed": false,
		"author": "",
		"cover_href": "/images/library/missing-cover-image.png",
		"created_at": "2012-06-15T00:05:56.371Z",
		"description": "",
		"epub_version": "3.0",
		"fixed_layout": false,
		"id": "http://www.aozora.gr.jp/cards/000148/card776.html",
		"key": "kusamakura",
		"language": "ja-jp",
		"layout": "",
		"modified_date": "2012-04-24T00:00:00Z",
		"ncx": "ncxtoc",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/kusamakura/OPS/package.opf",
		"page_prog_dir": "rtl",
		"paginate_backwards": false,
		"pubdate": "",
		"publisher": "",
		"rights": "",
		"spread": "",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "草枕",
		"updated_at": "2012-06-15T00:06:55.212Z"
	}, {
		"apple_fixed": false,
		"author": "Herman Melville",
		"cover_href": "/epub_content/moby_dick/OPS/images/9780316000000.jpg",
		"created_at": "2012-06-15T00:05:56.371Z",
		"description": "",
		"epub_version": "3.0",
		"fixed_layout": false,
		"id": "code.google.com.epub-samples.moby-dick-basic",
		"key": "moby_dick",
		"language": "en-US",
		"layout": "",
		"modified_date": "2012-01-18T12:47:00Z",
		"ncx": "",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/moby_dick/OPS/package.opf",
		"page_prog_dir": "",
		"paginate_backwards": false,
		"pubdate": "",
		"publisher": "Harper & Brothers, Publishers",
		"rights": "This work is shared with the public using the Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0) license.",
		"spread": "",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "Moby-Dick",
		"updated_at": "2012-06-15T00:07:21.516Z"
	}, {
		"apple_fixed": false,
		"author": "",
		"cover_href": "/epub_content/trees/EPUB/cover.jpg",
		"created_at": "2012-06-15T00:05:56.371Z",
		"description": "Test of canvas element and CSS3 multi-column layout",
		"epub_version": "3.0",
		"fixed_layout": false,
		"id": "code.google.com.epub-samples.trees",
		"key": "trees",
		"language": "en",
		"layout": "",
		"modified_date": "2012-04-05T12:47:00Z",
		"ncx": "",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/trees/EPUB/package.opf",
		"page_prog_dir": "",
		"paginate_backwards": false,
		"pubdate": "",
		"publisher": "",
		"rights": "",
		"spread": "",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "Trees",
		"updated_at": "2012-06-15T00:07:49.803Z"
	}, {
		"apple_fixed": false,
		"author": "",
		"cover_href": "/images/library/missing-cover-image.png",
		"created_at": "2012-06-15T00:08:27.336Z",
		"description": "",
		"epub_version": "3.0",
		"fixed_layout": true,
		"id": "urn:uuid:A649F639-6C1F-1014-8CC3-F813564D7508",
		"key": "haruko",
		"language": "ja-jp",
		"layout": "pre-paginated",
		"modified_date": "2012-05-24T00:00:00Z",
		"ncx": "ncxtoc",
		"open_to_spread": false,
		"orientation": "portrait",
		"package_doc_path": "/epub_content/haruko/OPS/package.opf",
		"page_prog_dir": "rtl",
		"paginate_backwards": false,
		"pubdate": "",
		"publisher": "",
		"rights": "",
		"spread": "landscape",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "ハルコさんの彼氏",
		"updated_at": "2012-06-15T00:08:36.776Z"
	}, {
		"apple_fixed": false,
		"author": "",
		"cover_href": "/images/library/missing-cover-image.png",
		"created_at": "2012-06-15T00:08:27.336Z",
		"description": "",
		"epub_version": "3.0",
		"fixed_layout": false,
		"id": "code.google.com.epub-samples.hefty.water",
		"key": "hefty_water",
		"language": "en",
		"layout": "",
		"modified_date": "2012-03-29T12:00:00Z",
		"ncx": "",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/hefty_water/EPUB/package.opf",
		"page_prog_dir": "",
		"paginate_backwards": false,
		"pubdate": "2012-03-29",
		"publisher": "",
		"rights": "",
		"spread": "",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "Hefty Water",
		"updated_at": "2012-06-15T00:09:37.681Z"
	}, {
		"apple_fixed": false,
		"author": "Matt Garrish",
		"cover_href": "/epub_content/accessible_epub_3/EPUB/covers/9781449328030_lrg.jpg",
		"created_at": "2012-06-15T00:10:25.327Z",
		"current_margin": 1,
		"current_theme": "default-theme",
		"description": "",
		"epub_version": "3.0",
		"fixed_layout": false,
		"font_size": 10,
		"id": "urn:isbn:9781449328030",
		"key": "accessible_epub_3",
		"language": "en",
		"layout": "",
		"modified_date": "2012-02-20T22:17:24Z",
		"ncx": "ncx",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/accessible_epub_3/EPUB/package.opf",
		"page_prog_dir": "",
		"paginate_backwards": false,
		"pubdate": "2012",
		"publisher": "O’Reilly Media, Inc.",
		"rights": "Copyright © 2012 O’Reilly Media, Inc",
		"spread": "",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "Accessible EPUB 3",
		"two_up": true,
		"updated_at": "2012-06-15T00:13:26.319Z"
	}, {
		"apple_fixed": false,
		"author": "Pr David Khayat",
		"cover_href": "/epub_content/regime_anticancer_arabic/EPUB/Image/cover.jpg",
		"created_at": "2012-06-15T00:11:17.450Z",
		"description": "",
		"epub_version": "3.0",
		"fixed_layout": false,
		"id": "code.google.com.epub-samples.regime-anticancer-arabic",
		"key": "regime_anticancer_arabic",
		"language": "ar",
		"layout": "",
		"modified_date": "2012-03-26T12:00:00Z",
		"ncx": "ncx",
		"open_to_spread": false,
		"orientation": "",
		"package_doc_path": "/epub_content/regime_anticancer_arabic/EPUB/package.opf",
		"page_prog_dir": "rtl",
		"paginate_backwards": false,
		"pubdate": "2012",
		"publisher": "Hachette Antoine",
		"rights": "This work is shared with the public using the Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0) license.",
		"spread": "",
		"src_url": "http://code.google.com/p/epub-samples/downloads/list",
		"title": "Le Vrai Régime anti-cancer",
		"updated_at": "2012-06-15T00:11:57.065Z"
	}
]
// This is the namespace and initialization code that is used by
// by the web served version of readium. It is not included in
// the chrome extension at all.

if( !window.Readium ) {
	window.Readium = {
		Models: {},
		Collections: {},
		Views: {},
		Routers: {},
		Utils: {},
		Init: function() {
			window.options = Readium.Models.ReadiumOptions.getInstance();
			window.optionsView = new Readium.Views.ReadiumOptionsView({model: window.options});
				
			window.Library = new Readium.Collections.LibraryItems(window.ReadiumLibraryData);
			window.lib_view = new Readium.Views.LibraryItemsView({collection: window.Library});
			//window.fp_view = new Readium.Views.FilePickerView();
			window.router = new Readium.Routers.ApplicationRouter({collection: window.Library});

			Backbone.history.start({pushState: false})
			// window.Library.fetch();
			window.Library.trigger('reset')
			
			$("#block-view-btn").click(function(e) {
				$('#library-items-container').addClass("block-view").removeClass("row-view")
			});
			$("#row-view-btn").click(function(e) {
				$('#library-items-container').addClass("row-view").removeClass("block-view")
			});
		}
	};
};

$(function() {
	// call the initialization code when the dom is loaded
	window.Readium.Init();
});
Readium.HttpFileApi = function(initCallback) {
    var api = {
        readTextFile: function(path, readCallback, errorCallback) {
            $.ajax({
                //'cache' : false,
                'url' : path,
                'dataType' : 'text',
                'success' : function(data, textStatus, jqXHR) {
                    readCallback(data, jqXHR)
                },
                'error' : function(data, textStatus, jqXHR) {
                    errorCallback(data, textStatus, jqXHR)
                }
            })
        },

        getFsUri: function(path, successCallback, errorCallback) {
            successCallback(document.location.protocol + '//' + document.location.host + path)
        }
    }

    return function ( callback ) {
        callback(api);
        return api;
    }
}();

// patch in:
// TODO: Find a way to easily patch in
Readium.FileSystemApi = Readium.HttpFileApi

// based on http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
Readium.Utils.Guid = function() {
   return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    	var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
    	return v.toString(16);
	});
};

// roughly based on http://documentcloud.github.com/backbone/docs/backbone-localstorage.html
Readium.Utils.LocalStorageAdaptor = function(storeName) {

	var _data;

	var save = function() {
		localStorage.setItem(storeName, JSON.stringify(_data));
	};

	var create = function(model) {
		if (!model.id) model.id = model.attributes.id = guid();
		_data[model.id] = model;
		save();
		return model;
	};

	var update = function(model) {
		_data[model.id] = model;
		save();
		return model;
	};

	var find = function(model) {
		return _data[model.id];
	};

	var findAll = function() {
		return _.values(_data);
	};


	var destroy = function(model) {
		delete _data[model.id];
		save();
		return model;
	};

	return function(method, model, options) {

		var resp;
		var strData = localStorage.getItem(storeName);
		_data = ( strData && JSON.parse(strData)) || {};

		switch (method) {
			case "read":    resp = model.id ? find(model) : findAll(); break;
			case "create":  resp = create(model);                            break;
			case "update":  resp = update(model);                            break;
			case "delete":  resp = destroy(model);                           break;
		}

		if (resp) {
			if(options.success) {
				options.success(resp);
			}
		} else {
			if(options.error) {
				options.error("Record not found");	
			}
		}
	};

};
Readium.Utils.setCookie = function(c_name,value,exdays) {
	var exdate=new Date();
	exdate.setDate(exdate.getDate() + exdays);
	var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
	document.cookie=c_name + "=" + c_value;
}


Readium.Utils.getCookie = function(c_name) {
	var i, x, y, ARRcookies=document.cookie.split(";");
	for (i = 0; i < ARRcookies.length; i++) {
		x = ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
		y = ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
		x = x.replace(/^\s+|\s+$/g,"");
		if ( x == c_name ) {
			return unescape(y);
		}
	}
}

Readium.Utils.trimString = function(str) {
	return str.replace(/^\s+|\s+$/g, '');
}
Handlebars.registerHelper('orUnknown', function(str) {
  	return str ? str : chrome.i18n.getMessage("i18n_unknown");
});

// A helper method used to fetch i18n messages in handlebars
// templates
Handlebars.registerHelper('fetchInzMessage', function(key) {
	return new Handlebars.SafeString(chrome.i18n.getMessage(key));
});
Readium.Models.ReadiumOptions = Backbone.Model.extend({

	initialize: function() {
		this.set("id", "singleton");
	},

	defaults: {
		hijack_epub_urls: false,
		verbose_unpacking: true,
		paginate_everything: true
	},

	sync: Readium.Utils.LocalStorageAdaptor("READIUM_OPTIONS")
}, {
	getInstance: function() {
		var instance = new Readium.Models.ReadiumOptions();
		instance.fetch({
			error: function() {
				localStorage.setItem("READIUM_OPTIONS", "");
				instance.save();
			}
		});
		return instance;
	}
});
// todo move this stuff into the proper namespaces
Readium.Models.LibraryItem = Backbone.Model.extend({

	idAttribute: "key",
	
	getViewBookUrl: function(book) {
		return "/viewer.html?book=" + this.get('key');
	},

	openInReader: function() {
		window.location = this.getViewBookUrl();
	}

});

Readium.Collections.LibraryItems = Backbone.Collection.extend({

	model: Readium.Models.LibraryItem,

	url: "/epub_content/metadata.json"
	
});

Readium.Views.LibraryItemView = Backbone.View.extend({

	tagName: 'div',

	className: "book-item clearfix",

	initialize: function() {
		_.bindAll(this, "render");	
		this.template = Handlebars.templates.library_item_template;
	},

	render: function() {
		var renderedContent = this.template({data: this.model.toJSON()});
		$(this.el).html(renderedContent);
		this.$(".delete").toggle(false);
		return this;
	},

	events: {
		"click .delete": function(e) {
			e.preventDefault();
			var confMessage;
			var selector = "#details-modal-" + this.model.get('key');
			confMessage  = "Are you sure you want to perminantly delete " 
			confMessage += this.model.get('title');
			confMessage += "?";


			if(confirm(confMessage)) {
				$(selector).modal('hide');
				this.model.destroy();
				this.remove();
			}
		},

		"click .read": function(e) {
			this.model.openInReader();
		}
		
	}
});

Readium.Views.LibraryItemsView = Backbone.View.extend({
	tagName: 'div',

	id: "library-items-container",

	className: 'row-view clearfix',

	

	initialize: function() {
		this.template = Handlebars.templates.library_items_template;
		this.collection.bind('reset', this.render, this);
		this.collection.bind('add',   this.addOne, this);
	},

	render: function() {
		var collection = this.collection;
		var $container = $(this.el);
		$container.html(this.template({}));
		this.$('#empty-message').toggle(this.collection.isEmpty());

		collection.each(function(item) {
			var view = new Readium.Views.LibraryItemView({
				model: item,
				collection: collection,
				id: item.get('id')
			});
			$container.append( view.render().el );

		});
		
		// i dunno if this should go here
		$('#library-books-list').html(this.el)
		return this;
	},

	addOne: function(book) {
		var view = new LibraryItemView({
			model: book,
			collection: this.collection,
			id: book.get('id')
		});
		// we are adding so this should always be hidden!
		this.$('#empty-message').toggle(false);
		$(this.el).append( view.render().el );
	},

	events: {
		
	}
});


Readium.Views.ExtractItemView = Backbone.View.extend({
	
	el: $('#progress-container')[0],

	initialize: function() {	
		this.template = Handlebars.templates.extracting_item_template;
		this.model.bind('change', this.render, this);
		this.model.bind("change:error", this.extractionFailed, this);
	},

	render: function() {
		var $el = $(this.el);
		if( this.model.get('extracting') ) {
			$el.html(this.template(this.model.toJSON()));
			$el.show("slow");
		}
		else {
			$el.hide("slow");
		}
		return this;
	},

	extractionFailed: function(msg) {
		alert(this.model.get("error"));
		this.model.set("extracting", false);
	}

});

Readium.Views.ReadiumOptionsView = Backbone.View.extend({
	el: "#readium-options-modal",

	initialize: function() {
		this.model.on("change", this.render, this);
		this.render();
	},

	render: function() {
		var m = this.model;
		this.$('#paginate_everything').prop('checked', m.get("paginate_everything"));
		this.$('#verbose_unpacking').prop('checked', m.get("verbose_unpacking"));
		this.$('#hijack_epub_urls').prop('checked', m.get("hijack_epub_urls"));
	},

	events: {
		"change #verbose_unpacking": "updateSettings",
		"change #hijack_epub_urls": "updateSettings",
		"change #paginate_everything": "updateSettings",
		"click #save-settings-btn": "save"
		},

		updateSettings: function() {
			var hijack = this.$('#hijack_epub_urls').prop('checked')
			var unpack = this.$('#verbose_unpacking').prop('checked')
			var paginate = this.$('#paginate_everything').prop('checked')
			
		this.model.set({"verbose_unpacking": unpack,
						"hijack_epub_urls": hijack,
						"paginate_everything": paginate});
		},

		save: function() {
			this.model.save();
			this.$el.modal("hide");
		}

});

Readium.Routers.ApplicationRouter = Backbone.Router.extend({
	initialize: function(options) {
		this.collection = options.collection;
	},


	routes: {
		"view_book/:id": "openBook",
		"": "showLibrary"
	},

	openBook: function(key) {
		this.showViewer();
		var book_attrs = this.collection.get(key).toJSON();
		if(book_attrs.fixed_layout) {
			console.log('initializing fixed layout book');
			window._book = new Readium.Models.AppleFixedEbook(book_attrs);
		}
		else {
			console.log('initializing reflowable book');
			window._book = new Readium.Models.ReflowableEbook(book_attrs);
		}
		
		window._libraryView = new Readium.Views.ViewerApplicationView({
			model: window._book
		});
		window._libraryView.render();
	},

	showLibrary: function() {
		$("#readium-library-activity").toggle(true);
		$("#readium-viewer-activity").toggle(false);
	},

	showViewer: function() {
		$("#readium-library-activity").toggle(false);
		$("#readium-viewer-activity").toggle(true);
	},

	splat_handler: function(splat) {
		console.log(splat);
	}

}); 
(function() {
  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};
templates['binding_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var foundHelper, self=this;


  return "<iframe scrolling=\"no\" \n		frameborder=\"0\" \n		marginwidth=\"0\" \n		marginheight=\"0\" \n		width=\"100%\" \n		height=\"100%\" \n		class='binding-sandbox'>\n</iframe>";});
templates['extracting_item_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<h5>";
  foundHelper = helpers.log_message;
  stack1 = foundHelper || depth0.log_message;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "log_message", { hash: {} }); }
  buffer += escapeExpression(stack1) + "</h5>\n<div class=\"progress progress-striped progress-success active \">	\n		<div role=\"status\" aria-live=\"assertive\" aria-relevant=\"all\" class=\"bar\" style=\"width: ";
  foundHelper = helpers.progress;
  stack1 = foundHelper || depth0.progress;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "progress", { hash: {} }); }
  buffer += escapeExpression(stack1) + "%;\"></div>\n</div>";
  return buffer;});
templates['fixed_page_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<div class=\"fixed-page-margin\">\n	<iframe scrolling=\"no\" \n			frameborder=\"0\" \n			marginwidth=\"0\" \n			marginheight=\"0\" \n			width=\"";
  foundHelper = helpers.width;
  stack1 = foundHelper || depth0.width;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "width", { hash: {} }); }
  buffer += escapeExpression(stack1) + "px\" \n			height=\"";
  foundHelper = helpers.height;
  stack1 = foundHelper || depth0.height;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "height", { hash: {} }); }
  buffer += escapeExpression(stack1) + "px\" \n			src=\"";
  foundHelper = helpers.uri;
  stack1 = foundHelper || depth0.uri;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "uri", { hash: {} }); }
  buffer += escapeExpression(stack1) + "\"\n			class='content-sandbox'>\n	</iframe>\n</div>";
  return buffer;});
templates['image_page_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<div class=\"fixed-page-margin\">\n	<img src=\"";
  foundHelper = helpers.uri;
  stack1 = foundHelper || depth0.uri;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "uri", { hash: {} }); }
  buffer += escapeExpression(stack1) + "\" >\n</div>";
  return buffer;});
templates['library_item_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, stack2, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<div class='info-wrap'>\n	<div class='caption book-info'>\n		<h2 class='green info-item title'>";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.title);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.title", { hash: {} }); }
  buffer += escapeExpression(stack1) + "</h2>\n		<div class='info-item author'>";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.author);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		<div class='info-item epub-version'>ePUB ";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.epub_version);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		\n	</div>\n	\n	<img class='cover-image read' src='";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.cover_href);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.cover_href", { hash: {} }); }
  buffer += escapeExpression(stack1) + "' width='150' height='220' alt='Open ePUB ";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.title);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.title", { hash: {} }); }
  buffer += escapeExpression(stack1) + "'>\n	\n	<a href=\"#details-modal-";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.key);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.key", { hash: {} }); }
  buffer += escapeExpression(stack1) + "\" class=\"info-icon\" data-toggle=\"modal\" role=\"button\">\n		<img class='info-icon pull-right' src='/images/library/info-icon.png' height=\"39px\" width=\"39px\" alt='";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.title);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.title", { hash: {} }); }
  buffer += escapeExpression(stack1) + " information'>\n	</a>\n</div>\n\n<div class=\"caption buttons\">\n	<a href=\"#todo\" class=\"btn read\" data-book='";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.key);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.key", { hash: {} }); }
  buffer += escapeExpression(stack1) + "' role='button'>";
  stack1 = "i18n_read";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</a>\n	<a href=\"#details-modal-";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.key);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.key", { hash: {} }); }
  buffer += escapeExpression(stack1) + "\" class=\"btn details\" data-toggle=\"modal\" role=\"button\">\n		";
  stack1 = "i18n_details";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "\n	</a>\n</div>\n\n<div id='details-modal-";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.key);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.key", { hash: {} }); }
  buffer += escapeExpression(stack1) + "' class='modal fade details-modal'>\n	<div class=\"pull-left modal-cover-wrap\">\n		<img class='details-cover-image' src='";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.cover_href);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.cover_href", { hash: {} }); }
  buffer += escapeExpression(stack1) + "' width='150' height='220' alt='ePUB cover'>\n		<div class=\"caption modal-buttons\">\n			<a href=\"#\" class=\"btn read\" data-book='<%= data.key %>' role='button'>";
  stack1 = "i18n_read";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</a>\n			<a class=\"btn btn-danger delete pull-right\" role='button'>";
  stack1 = "i18n_delete";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</a>\n		</div>\n	</div>\n	<div class='caption modal-book-info'>\n		<h3 class='green modal-title'>";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.title);
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "data.title", { hash: {} }); }
  buffer += escapeExpression(stack1) + "</h3>\n		<div class='modal-detail gap'>";
  stack1 = "i18n_author";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1);
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.author);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		<div class='modal-detail'>";
  stack1 = "i18n_publisher";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1);
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.publisher);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		<div class='modal-detail'>";
  stack1 = "i18n_pub_date";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1);
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.pubdate);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		<div class='modal-detail'>";
  stack1 = "i18n_modified_date";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1);
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.modified_date);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		<div class='modal-detail gap'>";
  stack1 = "i18n_id";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1);
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.id);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		<div class='modal-detail green'>";
  stack1 = "i18n_epub_version";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1);
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.epub_version);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n		<div class='modal-detail'>";
  stack1 = "i18n_created_at";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1);
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.created_at);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</div>\n	</div>\n	<div class='modal-detail source'>\n	<span class='green' style=\"padding-right: 10px\">";
  stack1 = "i18n_source";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "</span>\n		";
  foundHelper = helpers.data;
  stack1 = foundHelper || depth0.data;
  stack1 = (stack1 === null || stack1 === undefined || stack1 === false ? stack1 : stack1.src_url);
  foundHelper = helpers.orUnknown;
  stack2 = foundHelper || depth0.orUnknown;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "orUnknown", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "\n	</div>\n</div>			";
  return buffer;});
templates['library_items_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, stack2, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<div id='empty-message'>\n	<p id='empty-message-text' class='green'>\n		";
  stack1 = "i18n_add_items";
  foundHelper = helpers.fetchInzMessage;
  stack2 = foundHelper || depth0.fetchInzMessage;
  if(typeof stack2 === functionType) { stack1 = stack2.call(depth0, stack1, { hash: {} }); }
  else if(stack2=== undef) { stack1 = helperMissing.call(depth0, "fetchInzMessage", stack1, { hash: {} }); }
  else { stack1 = stack2; }
  buffer += escapeExpression(stack1) + "\n	</p>\n	<img id='empty-arrow' src='/images/library/empty_library_arrow.png' alt='' />\n</div>";
  return buffer;});
templates['ncx_nav_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<li class=\"nav-elem\">\n	<a href=\"";
  foundHelper = helpers.href;
  stack1 = foundHelper || depth0.href;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "href", { hash: {} }); }
  buffer += escapeExpression(stack1) + "\">";
  foundHelper = helpers.text;
  stack1 = foundHelper || depth0.text;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "text", { hash: {} }); }
  buffer += escapeExpression(stack1) + "</a>\n</li>";
  return buffer;});
templates['reflowing_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<div id=\"flowing-wrapper\">\n	<iframe scrolling=\"no\" \n			frameborder=\"0\" \n			marginwidth=\"0\" \n			marginheight=\"0\" \n			width=\"50%\" \n			height=\"100%\" \n			src=\"";
  foundHelper = helpers.uri;
  stack1 = foundHelper || depth0.uri;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "uri", { hash: {} }); }
  buffer += escapeExpression(stack1) + "\"\n			id=\"readium-flowing-content\">\n	</iframe>\n</div>";
  return buffer;});
templates['scrolling_page_template'] = template(function (Handlebars,depth0,helpers,partials,data) {
  helpers = helpers || Handlebars.helpers;
  var buffer = "", stack1, foundHelper, self=this, functionType="function", helperMissing=helpers.helperMissing, undef=void 0, escapeExpression=this.escapeExpression;


  buffer += "<div id=\"scrolling-content\" class=\"scrolling-page-wrap\">\n	<div class=\"scrolling-page-margin\">\n\n		<iframe scrolling=\"yes\" \n				frameborder=\"0\" \n				marginwidth=\"0\" \n				marginheight=\"0\" \n				width=\"100%\" \n				height=\"100%\" \n				src=\"";
  foundHelper = helpers.uri;
  stack1 = foundHelper || depth0.uri;
  if(typeof stack1 === functionType) { stack1 = stack1.call(depth0, { hash: {} }); }
  else if(stack1=== undef) { stack1 = helperMissing.call(depth0, "uri", { hash: {} }); }
  buffer += escapeExpression(stack1) + "\"\n				class='content-sandbox'>\n		</iframe>\n	</div>\n</div>";
  return buffer;});
})();
